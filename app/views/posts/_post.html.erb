<%= turbo_frame_tag dom_id(post) do %>
  <article class="bg-white border mb-4">
    <div class="p-4">
      <div class="flex justify-between items-start mb-2">
        <h2 class="text-xl font-bold"><%= post.title %></h2>
        <%= button_to post_path(post), method: :delete, 
                      class: "text-red-600 hover:text-red-800 text-sm font-medium",
                      data: { 
                        controller: "delete",
                        delete_message_value: "Are you sure you want to delete this post?",
                        action: "click->delete#confirm"
                      },
                      remote: true do %>
          Delete
        <% end %>
      </div>
      <div class="text-sm mb-4">
        <%= post.created_at.strftime("%B %d, %Y") %>
      </div>
      <div>
        <%= post.body %>
      </div>
    </div>

    <div class="border-t bg-gray-100 p-4">
      <div class="mb-4">
        <h3 class="text-lg font-bold">
          Comments (<%= post.comments.count %>)
        </h3>
      </div>

      <%= turbo_frame_tag "#{dom_id(post)}_comments" do %>
        <div id="<%= dom_id(post) %>_comments_list">
          <%= render post.comments %>
        </div>
        <%= render "comments/form", post: post, comment: Comment.new %>
      <% end %>
    </div>

  </article>
<% end %>
