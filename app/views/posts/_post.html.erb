<%= turbo_frame_tag dom_id(post) do %>
  <article class="bg-white border mb-4">
    <div class="p-4">
      <div class="flex justify-between items-start mb-2">
        <h2 class="text-xl font-bold"><%= post.title %></h2>
        <%= button_to post_path(post), method: :delete, 
                      class: "text-red-600 hover:text-red-800 text-sm font-medium",
                      data: { 
                        controller: "delete",
                        delete_message_value: "Are you sure you want to delete this post?",
                        action: "click->delete#confirm"
                      },
                      remote: true do %>
          Delete
        <% end %>
      </div>
      <div class="text-sm mb-4">
        <%= post.created_at.strftime("%B %d, %Y") %>
      </div>
      <div>
        <%= post.body %>
      </div>
    </div>

    <div class="border-t bg-gray-100 p-4">
      <div class="mb-4">
        <h3 class="text-lg font-bold">
          Comments (<%= post.comments.count %>)
        </h3>
      </div>

      <%= turbo_frame_tag "#{dom_id(post)}_comments" do %>
        <div id="<%= dom_id(post) %>_comments_list">
          <%= render post.comments %>
        </div>
        <div class="bg-white border p-3" id="<%= dom_id(post) %>_comment_form">
          <%= form_with model: [post, Comment.new], local: false do |f| %>
            <%= f.text_field :name, placeholder: "Your name", class: "w-full px-3 py-2 border text-sm mb-3" %>
            <%= f.text_area :body, rows: 2, placeholder: "Add a comment...", class: "w-full px-3 py-2 border text-sm mb-3" %>
            <%= f.submit "Post Comment", class: "bg-blue-600 text-white py-2 px-4 text-sm" %>
          <% end %>
        </div>
      <% end %>
    </div>

  </article>
<% end %>
